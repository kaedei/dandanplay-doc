import{_ as h,r as n,o as i,c,a as e,b as d,w as t,d as a,e as r}from"./app-a0d85ae6.js";const s={},u=e("h1",{id:"开放平台-api-变动日志",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#开放平台-api-变动日志","aria-hidden":"true"},"#"),a(" 开放平台 API 变动日志")],-1),p={class:"table-of-contents"},_=r('<h2 id="_2025年2月5日" tabindex="-1"><a class="header-anchor" href="#_2025年2月5日" aria-hidden="true">#</a> 2025年2月5日</h2><h3 id="新增功能" tabindex="-1"><a class="header-anchor" href="#新增功能" aria-hidden="true">#</a> 新增功能</h3><p>获取第三方弹幕接口 <code>/api/v2/extcomment</code> 增加了简繁转换参数 <code>chConvert</code>。</p><table><thead><tr><th>接口路径</th><th>参数</th><th>变动描述</th></tr></thead><tbody><tr><td><code>/api/v2/extcomment</code></td><td><code>chConvert</code></td><td>0-不转换，1-转换为简体，2-转换为繁体。</td></tr></tbody></table><h3 id="问题修复" tabindex="-1"><a class="header-anchor" href="#问题修复" aria-hidden="true">#</a> 问题修复</h3><p>修复了调用弹幕接口 <code>/api/v2/comment</code> 并提供 <code>withRelated=true</code> 时，如果第三方弹幕源有偏移时间，返回的弹幕没有正确调整弹幕时间的问题。</p><h2 id="_2025年1月30日" tabindex="-1"><a class="header-anchor" href="#_2025年1月30日" aria-hidden="true">#</a> 2025年1月30日</h2><h3 id="平台认证机制" tabindex="-1"><a class="header-anchor" href="#平台认证机制" aria-hidden="true">#</a> 平台认证机制</h3>',8),f=r('<h2 id="_2025年1月27日" tabindex="-1"><a class="header-anchor" href="#_2025年1月27日" aria-hidden="true">#</a> 2025年1月27日</h2><h3 id="性能优化" tabindex="-1"><a class="header-anchor" href="#性能优化" aria-hidden="true">#</a> 性能优化</h3><p>近期，超出预期数量的请求使服务器过载，导致出现了多次 API 访问超时的故障。为了解决此问题，我们已优化了服务器端相关代码，并将弹幕加速服务独立拆分，应用了负载均衡与自动缩放的策略。目前开放平台服务已恢复正常。</p><h2 id="_2025年1月26日" tabindex="-1"><a class="header-anchor" href="#_2025年1月26日" aria-hidden="true">#</a> 2025年1月26日</h2><h3 id="新增功能-1" tabindex="-1"><a class="header-anchor" href="#新增功能-1" aria-hidden="true">#</a> 新增功能</h3><table><thead><tr><th>接口路径</th><th>参数</th><th>变动描述</th></tr></thead><tbody><tr><td><code>/api/v2/search/episodes</code></td><td><code>tmdbId</code></td><td>增加了 <code>tmdbId</code> 参数，用于通过 TMDB ID 反查弹弹play的弹幕库。TMDB 存在 season（季）的设定而弹弹play没有，因此一个 TMDB ID 可能会查询到多个结果。</td></tr><tr><td></td><td><code>anime</code></td><td>改为可选参数。查询时，<code>anime</code> 和 <code>tmdbId</code> 至少需要提供一个。</td></tr></tbody></table><h4 id="示例用法" tabindex="-1"><a class="header-anchor" href="#示例用法" aria-hidden="true">#</a> 示例用法</h4><ol><li><p><strong>使用 <code>tmdbId</code> 参数：</strong> <code>/api/v2/search/episodes?tmdbId=100049&amp;episode=2</code></p><p>直接搜索对应 TMDB ID 的动画，并过滤出指定集数的结果。</p></li><li><p><strong>同时使用 <code>anime</code> 和 <code>tmdbId</code> 参数：</strong> <code>/api/v2/search/episodes?anime=可爱&amp;tmdbId=100049&amp;episode=2</code></p><p>先根据关键词搜索动画，再过滤出符合 TMDB ID 和集数的结果。</p></li></ol><h3 id="性能优化-1" tabindex="-1"><a class="header-anchor" href="#性能优化-1" aria-hidden="true">#</a> 性能优化</h3><ul><li><strong>优化查询响应速度：</strong> 当 <code>episode</code> 参数为数字时，查询响应速度将得到显著提升。推荐始终使用数字来查询集数。</li></ul><h2 id="_2025年1月20日" tabindex="-1"><a class="header-anchor" href="#_2025年1月20日" aria-hidden="true">#</a> 2025年1月20日</h2><h3 id="平台认证机制-1" tabindex="-1"><a class="header-anchor" href="#平台认证机制-1" aria-hidden="true">#</a> 平台认证机制</h3>',12),b=e("p",null,[a("预计开启强制认证的时间："),e("strong",null,"2025年1月30日"),a("后，最晚"),e("strong",null,"2025年2月5日"),a("。")],-1),m=e("p",null,[a("为了保证开放平台正常运行，当前，搜索接口 "),e("code",null,"/api/v2/search"),a(" 已提前开启验证（其他接口暂不受影响）。如果您的App正在使用此接口，请按照文档说明更新您的代码。")],-1);function x(I,v){const o=n("router-link"),l=n("RouterLink");return i(),c("div",null,[u,e("nav",p,[e("ul",null,[e("li",null,[d(o,{to:"#_2025年2月5日"},{default:t(()=>[a("2025年2月5日")]),_:1}),e("ul",null,[e("li",null,[d(o,{to:"#新增功能"},{default:t(()=>[a("新增功能")]),_:1})]),e("li",null,[d(o,{to:"#问题修复"},{default:t(()=>[a("问题修复")]),_:1})])])]),e("li",null,[d(o,{to:"#_2025年1月30日"},{default:t(()=>[a("2025年1月30日")]),_:1}),e("ul",null,[e("li",null,[d(o,{to:"#平台认证机制"},{default:t(()=>[a("平台认证机制")]),_:1})])])]),e("li",null,[d(o,{to:"#_2025年1月27日"},{default:t(()=>[a("2025年1月27日")]),_:1}),e("ul",null,[e("li",null,[d(o,{to:"#性能优化"},{default:t(()=>[a("性能优化")]),_:1})])])]),e("li",null,[d(o,{to:"#_2025年1月26日"},{default:t(()=>[a("2025年1月26日")]),_:1}),e("ul",null,[e("li",null,[d(o,{to:"#新增功能-1"},{default:t(()=>[a("新增功能")]),_:1})]),e("li",null,[d(o,{to:"#性能优化-1"},{default:t(()=>[a("性能优化")]),_:1})])])]),e("li",null,[d(o,{to:"#_2025年1月20日"},{default:t(()=>[a("2025年1月20日")]),_:1}),e("ul",null,[e("li",null,[d(o,{to:"#平台认证机制-1"},{default:t(()=>[a("平台认证机制")]),_:1})])])])])]),_,e("p",null,[a("开放平台已按原计划启用了应用强制认证机制，详见"),d(l,{to:"/open/"},{default:t(()=>[a("开放平台文档")]),_:1}),a("。开发者若要接入弹弹play开放平台，请先申请AppId和AppSecret，并及时更新您的应用。")]),f,e("p",null,[a("弹弹play开放平台将启用应用强制认证机制，详见"),d(l,{to:"/open/"},{default:t(()=>[a("开放平台文档")]),_:1}),a("。请开发者申请AppId和AppSecret，并及时更新您的应用。")]),b,m])}const D=h(s,[["render",x],["__file","changelog.html.vue"]]);export{D as default};
